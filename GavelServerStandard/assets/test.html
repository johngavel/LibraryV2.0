
<!doctype html>
<html lang="en">
  <head><meta charset="utf-8"><title>SSE Monitor</title></head>
  <body>
    <h1>Device Events</h1>
    <pre id="log"></pre>
    <script>
      const log = document.getElementById('log');

      // Connect to your device's SSE endpoint
      const es = new EventSource('/api/sse_events.stream');

      // Listen for generic 'message' (i.e., "data: <...>")
      es.onmessage = (evt) => {
        log.textContent += `message: ${evt.data}\n`;
      };

      // Listen for named events (e.g., "heartbeat", "command")
      es.addEventListener('heartbeat', (evt) => {
        log.textContent += `heartbeat: ${evt.data}\n`;
      });
      es.addEventListener('command', (evt) => {
        log.textContent += `command: ${evt.data}\n`;
      });

      es.onerror = (e) => { log.textContent += `SSE error\n`; };
    </script>
  </body>
</html>
